## 数据探索
根据观测调查得到的样本数据集后，接下来考虑的是：样本数据集的数据和质量是否符合模型构建的要求？是否出现未出现的数据状态？其中有没有出现明显的规律和变化？
各元素之间有没有关联性？<br>
通过检验数据集的数据质量，绘制图表，计算某种特征值等手段，对样本数据集的结构和规律进行分析的过程就是数据探索。数据探索有助于选择合适的数据预处理和数据建模，
甚至可以完成一些常用的由数据挖掘解决的问题。<br>
本章从数据挖掘的质量分析和数据特征分析这两个角度对数据进行探索。
### 3.1 数据质量分析
数据质量分析是数据挖掘中重要的一环，是数据预处理的前提，是数据挖掘i结果准确性和有效性的基础，没有可信的数据，数据挖掘构建的模型将是空中楼阁。数据质量分析的
首要任务是检查原始数据中是否有脏数据，脏数据是指不符合要求或者不能被直接分析的数据。在常见的数据挖掘工作中，脏数据主要包括<br>
* 缺失值
* 异常值
* 不一致的值
* 重复数据以及含有特殊符号的数据（#、）
#### 3.1.1 缺失值分析
数据的缺失一般包括记录的缺失和记录中某个字段的缺失，两者都会造成数据分析结果的不准确
**缺失值产生的原因**
* 有些信息暂时无法获取，或者获取的代价太大
* 有些信息是被遗漏的。可能输入时认为不重要，忘记填写或者对数据理解错误等一些人为因素而遗漏。或者因为信息采集时设备的故障、存储介质的故障、传输媒体的故障   等非人为原因而丢失。
* 属性值不存在。某种情况下，数据缺失不意味着数据有错误，对一些对象来说某些属性值是不存在的，如：一个未婚者的配偶姓名。<br>
**缺失值的影响**
* 数据挖掘建模将丢失大量的有用信息。
* 数据建模所表现的不确定性将更加显著，模型中蕴含的规律更难把握。
* 包含空值的运算会使建模过程陷入混乱，导致不可靠的输出。<br>
**缺失值分析**
* 使用简单的统计分析，可以得到确实值得属性的个数，以及每个属性的缺失数和未缺失数以及缺失率。<br>
#### 3.1.2 异常值分析
异常值分析是对输入数据是否有录入错误或者不合常理的数据。异常值是指样本中的个别值，其数值明显偏离其他值，异常值也称为离群点，异常值分析也称为离群点分析。<br>
**简单统计量分析**<br>
对一个变量做一个简单统计量描述，然后根据描述判断其值是否超出范围，最常用的统计量是最大值最小值统计。例如年龄，小明199岁，显然超过了年龄的最大值。<br>
**3σ原则**
数据符合正态分布，在3σ原则下，异常值被定义为一组与平均值偏差超过3倍标准差的值，在正态分布的假设下，距离平均值3σ以外的值出现的概率为P(|x-μ|>3σ)≤0.003,属于极个别小概率事件。如果事件不符合正态分布，也可以利用远离平均值的多少倍来标准差来描述。其中3σ即正态分布中的左右3σ。<br>
**箱形图分析**
箱形图提供了一个识别异常值的一个标准：异常值通常被定义为小于QL-1.5IQR或者大于Qu+1.5IQR的值，其中QL是下四分值，表示观察数中有四分之一逼她小，Qu是上四分值，表示有四分之一比其大，IQR是四分位差，是上减去下，包含全部观察值的一半。<br>
箱形图依据实际数据进行绘制，没有强制以什么图形出现，只是客观的显示数据的本来面貌。异常值比较客观，在异常值识别方面有一定的优势。其中查看数据基本信息代码
```py
#coding=utf-8
import numpy
import pandas as pd#导入pandas
catering_sale='E:/data/catering_sale.xls'#把数据分析的文件代入格式
data=pd.read_excel(catering_sale,index_col=u'日期')#读取数据，以日期为索引列
print(data.describe())#这个是查看数据基本状态
```
想要以箱型展示数据代码如下
```py
#coding=utf-8
import numpy
import pandas as pd#导入pandas
catering_sale='E:/data/catering_sale.xls'#把数据分析的文件代入格式
data=pd.read_excel(catering_sale,index_col=u'日期')#读取数据，以日期为索引列
print(data.describe())#这个是查看数据基本状态
import matplotlib.pyplot as plt #导入图像库
plt.rcParams['font.sans-serif'] = ['SimHei'] #用来正常显示中文标签
plt.rcParams['axes.unicode_minus'] = False #用来正常显示负号

plt.figure() #建立图像
p = data.boxplot(return_type='dict') #画箱线图，直接使用DataFrame的方法
x = p['fliers'][0].get_xdata() # 'flies'即为异常值的标签
y = p['fliers'][0].get_ydata()
y.sort() #从小到大排序，该方法直接改变原对象

#用annotate添加注释
#其中有些相近的点，注解会出现重叠，难以看清，需要一些技巧来控制。
#以下参数都是经过调试的，需要具体问题具体调试。
for i in range(len(x)):
  if i>0:
    plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.05 -0.8/(y[i]-y[i-1]),y[i]))
  else:
    plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.08,y[i]))

plt.show() #展示箱线图
```
注意：注意print(data.describe())中的数据观察要输出来才会显示出来，describe没有提示，自己敲出来。
从运行结果可以看出数据缺失1个，然后根据图片观看异常数据有7个，再根据数据的实际情况进行判断数据异常。继续编写过滤程序，进行后续处理。
#### 3.1.3 一致性分析
数据不一致主要是指数据矛盾性，不相容性，对不一致的数据进行挖掘可能产生与实际相违背的挖掘结果。<br.
数据的不一致主要来源于不同数据源的数据；对重复存放的数据没有一致性更新造成的。例如两张表中都有电话号码，只更新了其中一张表中的电话号码，另一张表中的电话号码未更新就造成了数据不一致。
### 3.2 数据特征分析
对质量分析之后，接下来可通过绘制图表、计算某种特征量等进行数据的特征分析。
#### 3.2.1 分布分析
分布分析能解开数据的分布特征和分布类型。对于定量数据，欲了解其分布形式是对称的还是非对称的，发现某些特大或特小的可疑值，可通过绘制频率分布表、频率分布直方图、绘制茎叶图等直观的分析。对于定性分布分析，可用饼图或条形图进行直观的分析，显示其分布情况。
**定量数据的分布分析**
对于定量分析，确定组宽和组数是主要问题。一般按照以下步骤进行分析：
1. 求极差
2. 确定组数和组距
3. 决定分点
4. 列出频率分布表
5. 绘制频率分布直方图
遵循的原则是：各组之间必须相互排斥；各组必须将所有数据包含在内；各组的组宽最好相等；<br>
**定性数据的分布分析**
例如菜的种类分布图，即种类所占百分比。饼状图，条形图。<br>
注：分布分析也就是数据分布概况，如果就一个品种，那就用分组查看，如果包含多个如蔬菜就用品种占比来确定数据分布例如菜种比例。
#### 3.2.2 对比分析
对比分析是把两个有联系的指标进行对比。选择合适的对比标准是非常关键的。<br>
对比分析主要有两种形式：绝对数对比和相对数分析<br>
[1] 绝对数分析<br>
利用绝对数对比，从而寻找差异的一种方法。
[2]相对数分析


